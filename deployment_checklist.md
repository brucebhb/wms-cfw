# 🚀 仓储管理系统部署检查清单

## 📋 部署前准备

### 服务器信息确认
- [ ] 服务器IP地址: `_________________`
- [ ] SSH访问正常
- [ ] 系统版本: Ubuntu 22.04 LTS
- [ ] 硬件配置: 4核8G内存
- [ ] 网络带宽: 12Mbps
- [ ] 磁盘空间: 至少40GB可用

### 本地准备
- [ ] 项目代码完整性检查
- [ ] 部署脚本权限设置
- [ ] 备份当前开发环境数据

## 🔧 第一阶段：服务器环境配置

### 基础环境安装
- [ ] 系统更新完成 (`apt update && apt upgrade`)
- [ ] Python 3.10 安装成功
- [ ] MySQL 8.0 安装成功
- [ ] Redis 安装成功
- [ ] Nginx 安装成功
- [ ] Supervisor 安装成功

### 系统优化配置
- [ ] 防火墙规则配置 (端口80, 443, SSH)
- [ ] 系统参数优化 (sysctl.conf)
- [ ] 用户限制配置 (limits.conf)
- [ ] 文件描述符限制设置

### 服务配置
- [ ] MySQL root密码设置
- [ ] MySQL安全配置完成
- [ ] Redis内存限制配置 (1GB)
- [ ] 应用用户创建 (warehouse)
- [ ] 目录权限设置

## 🗄️ 第二阶段：数据库配置

### MySQL配置优化
- [ ] 生产环境配置文件应用 (`mysql_production_config.cnf`)
- [ ] 连接池配置 (最大50连接)
- [ ] InnoDB缓冲池配置 (4GB)
- [ ] 慢查询日志启用
- [ ] 二进制日志配置

### 数据库初始化
- [ ] 生产数据库创建 (`warehouse_production`)
- [ ] 应用用户创建 (`warehouse_user`)
- [ ] 只读用户创建 (`warehouse_readonly`)
- [ ] 数据表创建完成
- [ ] 索引优化完成
- [ ] 初始数据导入

### 数据验证
- [ ] 仓库数据 (4个仓库)
- [ ] 收货人信息 (4条记录)
- [ ] 数据库连接测试
- [ ] 权限验证

## 📱 第三阶段：应用部署

### 代码部署
- [ ] 应用代码上传到 `/opt/warehouse`
- [ ] 文件权限设置正确
- [ ] 环境变量配置 (`.env.production`)
- [ ] Python虚拟环境创建
- [ ] 依赖包安装完成

### 应用配置
- [ ] Gunicorn配置文件 (`gunicorn_config.py`)
- [ ] 4个worker进程配置
- [ ] 日志配置正确
- [ ] 数据库连接配置
- [ ] Redis连接配置

### 服务配置
- [ ] Supervisor配置 (`/etc/supervisor/conf.d/warehouse.conf`)
- [ ] Nginx配置 (`/etc/nginx/sites-available/warehouse`)
- [ ] 静态文件服务配置
- [ ] 反向代理配置
- [ ] 健康检查端点配置

### 初始化验证
- [ ] 数据库表创建成功
- [ ] 管理员用户创建 (admin/admin123)
- [ ] 初始仓库数据导入
- [ ] 应用启动成功

## 🔄 第四阶段：服务启动

### 服务启动顺序
- [ ] MySQL服务启动
- [ ] Redis服务启动
- [ ] Supervisor服务启动
- [ ] 应用进程启动 (warehouse)
- [ ] Nginx服务启动

### 服务状态检查
- [ ] MySQL状态: `systemctl status mysql`
- [ ] Redis状态: `systemctl status redis-server`
- [ ] Supervisor状态: `systemctl status supervisor`
- [ ] 应用状态: `supervisorctl status warehouse`
- [ ] Nginx状态: `systemctl status nginx`

### 网络连接测试
- [ ] 本地健康检查: `curl http://localhost/health`
- [ ] 外部访问测试: `curl http://server_ip`
- [ ] 静态文件访问: `curl http://server_ip/static/css/style.css`

## 📊 第五阶段：监控配置

### 监控脚本部署
- [ ] 系统监控脚本 (`warehouse_monitor.sh`)
- [ ] 备份脚本 (`warehouse_backup.sh`)
- [ ] 性能优化脚本 (`warehouse_optimize.sh`)
- [ ] 状态检查脚本 (`warehouse_status.sh`)

### 定时任务配置
- [ ] 系统监控 (每5分钟)
- [ ] 自动备份 (每日2点)
- [ ] 临时文件清理 (每日3点)
- [ ] 服务重启 (每周日4点)

### 日志配置
- [ ] 应用日志轮转配置
- [ ] Nginx日志轮转配置
- [ ] MySQL慢查询日志
- [ ] 系统监控日志

## 🧪 第六阶段：功能测试

### 基础功能测试
- [ ] 用户登录功能 (admin/admin123)
- [ ] 主页面加载
- [ ] 仓库管理界面
- [ ] 用户管理界面
- [ ] 权限控制验证

### 业务功能测试
- [ ] 前端仓入库操作
- [ ] 前端仓出库操作
- [ ] 后端仓接收操作
- [ ] 库存查询功能
- [ ] 标签打印功能

### 数据流程测试
- [ ] 完整入库流程
- [ ] 完整出库流程
- [ ] 仓库间转移流程
- [ ] 库存更新验证
- [ ] 数据一致性检查

## ⚡ 第七阶段：性能测试

### 压力测试
- [ ] 15用户并发测试
- [ ] 1000请求压力测试
- [ ] 长时间稳定性测试
- [ ] 数据库性能测试
- [ ] Redis缓存测试

### 性能指标验证
- [ ] 主页面RPS > 20
- [ ] 平均响应时间 < 3秒
- [ ] 失败请求率 < 1%
- [ ] CPU使用率 < 80%
- [ ] 内存使用率 < 80%

### 资源监控
- [ ] 系统负载监控
- [ ] 磁盘使用率监控
- [ ] 网络连接数监控
- [ ] 数据库连接数监控

## 🔒 第八阶段：安全配置

### 网络安全
- [ ] 防火墙规则验证
- [ ] 不必要端口关闭
- [ ] SSH密钥认证 (可选)
- [ ] 密码策略配置

### 应用安全
- [ ] 数据库用户权限最小化
- [ ] 敏感文件权限设置
- [ ] 错误信息隐藏
- [ ] CSRF保护验证

### 数据安全
- [ ] 数据库备份验证
- [ ] 备份文件加密 (可选)
- [ ] 日志文件保护
- [ ] 敏感信息脱敏

## 📋 第九阶段：文档和交付

### 系统文档
- [ ] 部署文档完整
- [ ] 操作手册编写
- [ ] 故障排除指南
- [ ] 性能调优指南

### 管理信息
- [ ] 系统访问信息记录
- [ ] 管理员账号信息
- [ ] 数据库连接信息
- [ ] 监控和维护计划

### 用户培训
- [ ] 管理员培训完成
- [ ] 操作员培训完成
- [ ] 用户手册提供
- [ ] 技术支持联系方式

## ✅ 部署完成验证

### 最终检查
- [ ] 所有服务正常运行
- [ ] 所有功能测试通过
- [ ] 性能指标达标
- [ ] 监控系统正常
- [ ] 备份系统正常

### 交付确认
- [ ] 系统访问地址: `http://server_ip`
- [ ] 管理员账号: `admin / admin123`
- [ ] 系统状态: 正常运行
- [ ] 用户培训: 已完成
- [ ] 文档交付: 已完成

---

## 📞 紧急联系信息

**技术支持**: 
- 系统状态检查: `warehouse_status.sh`
- 服务重启: `supervisorctl restart warehouse`
- 日志查看: `tail -f /var/log/warehouse/gunicorn_error.log`

**重要文件路径**:
- 应用目录: `/opt/warehouse`
- 日志目录: `/var/log/warehouse`
- 备份目录: `/var/backups/warehouse`
- 配置文件: `/opt/warehouse/.env.production`

**部署完成时间**: `_______________`  
**部署人员**: `_______________`  
**验收人员**: `_______________`
