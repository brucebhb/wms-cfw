# ğŸ§  æ™ºèƒ½ä¼˜åŒ–ç³»ç»Ÿä½¿ç”¨æŒ‡å—

## ğŸ“‹ ç³»ç»Ÿæ¦‚è¿°

æ™ºèƒ½ä¼˜åŒ–ç³»ç»Ÿæ˜¯ä¸€ä¸ªè‡ªé€‚åº”çš„æ€§èƒ½ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥æ ¹æ®ç³»ç»Ÿè´Ÿè½½å’Œä½¿ç”¨æƒ…å†µåŠ¨æ€è°ƒæ•´ä¼˜åŒ–ç­–ç•¥ï¼Œè€Œä¸æ˜¯ç®€å•åœ°ç¦ç”¨åŠŸèƒ½ã€‚

### ğŸ¯ è®¾è®¡ç†å¿µ

- **æ™ºèƒ½è€Œéç¦ç”¨** - æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´åŠŸèƒ½å¼ºåº¦ï¼Œè€Œä¸æ˜¯å®Œå…¨å…³é—­
- **è‡ªé€‚åº”ä¼˜åŒ–** - ç³»ç»Ÿè‡ªåŠ¨ç›‘æ§å¹¶è°ƒæ•´ä¼˜åŒ–ç­–ç•¥
- **æ— ç¼é›†æˆ** - ä¸ç°æœ‰ç³»ç»Ÿç»„ä»¶å®Œç¾é›†æˆ
- **ç”¨æˆ·å¯æ§** - æä¾›æ‰‹åŠ¨æ§åˆ¶å’Œè‡ªåŠ¨æ¨¡å¼é€‰æ‹©

## ğŸ”§ æ ¸å¿ƒç»„ä»¶

### 1. æ™ºèƒ½ä¼˜åŒ–å™¨ (`IntelligentOptimizer`)
- **åŠŸèƒ½**: ç³»ç»Ÿç›‘æ§å’Œè‡ªé€‚åº”ä¼˜åŒ–
- **ç‰¹ç‚¹**: 
  - å®æ—¶ç›‘æ§CPUã€å†…å­˜ã€å“åº”æ—¶é—´ç­‰æŒ‡æ ‡
  - æ ¹æ®è´Ÿè½½è‡ªåŠ¨è°ƒæ•´ä¼˜åŒ–çº§åˆ«
  - æä¾›ä¼˜åŒ–å»ºè®®å’Œå†å²è®°å½•

### 2. é…ç½®ç®¡ç†å™¨ (`OptimizationConfigManager`)
- **åŠŸèƒ½**: åŠ¨æ€é…ç½®ç®¡ç†
- **ç‰¹ç‚¹**:
  - æ”¯æŒçƒ­æ›´æ–°é…ç½®
  - é…ç½®æŒä¹…åŒ–å­˜å‚¨
  - äº‹ä»¶é©±åŠ¨çš„é…ç½®å˜æ›´é€šçŸ¥

### 3. ä¼˜åŒ–æ§åˆ¶é¢æ¿ (`OptimizationDashboard`)
- **åŠŸèƒ½**: Webç•Œé¢ç®¡ç†
- **ç‰¹ç‚¹**:
  - å®æ—¶æ€§èƒ½ç›‘æ§å›¾è¡¨
  - ä¼˜åŒ–çº§åˆ«æ‰‹åŠ¨æ§åˆ¶
  - ç³»ç»Ÿå¥åº·çŠ¶æ€æ˜¾ç¤º

### 4. é›†æˆå™¨ (`IntelligentOptimizationIntegrator`)
- **åŠŸèƒ½**: ç³»ç»Ÿé›†æˆå’Œåè°ƒ
- **ç‰¹ç‚¹**:
  - æ— ç¼é›†æˆç°æœ‰ç»„ä»¶
  - åå°åˆå§‹åŒ–é¿å…é˜»å¡å¯åŠ¨
  - ç»Ÿä¸€çš„ä¼˜åŒ–ç­–ç•¥åº”ç”¨

## âš™ï¸ ä¼˜åŒ–çº§åˆ«è¯¦è§£

### ğŸŸ¡ æœ€å°ä¼˜åŒ– (Minimal)
**é€‚ç”¨åœºæ™¯**: é«˜è´Ÿè½½ã€èµ„æºç´§å¼ æ—¶
```
ç¼“å­˜é…ç½®:
  - å†…å­˜ç¼“å­˜: 50MB
  - Redis TTL: 30åˆ†é’Ÿ
  - é¢„åŠ è½½é¡¹: 5ä¸ª

åå°ä»»åŠ¡:
  - ç»´æŠ¤é—´éš”: 10åˆ†é’Ÿ
  - æœ€å¤§å¹¶å‘: 1ä¸ª
  - æ™ºèƒ½è°ƒåº¦: ç¦ç”¨

æ€§èƒ½ç›‘æ§:
  - ç›‘æ§é¢‘ç‡: 60ç§’
  - è‡ªåŠ¨ä¼˜åŒ–: ç¦ç”¨
  - è¯¦ç»†æ—¥å¿—: ç¦ç”¨
```

### ğŸ”µ å¹³è¡¡æ¨¡å¼ (Balanced)
**é€‚ç”¨åœºæ™¯**: æ­£å¸¸è¿è¡Œï¼Œå¹³è¡¡æ€§èƒ½ä¸åŠŸèƒ½
```
ç¼“å­˜é…ç½®:
  - å†…å­˜ç¼“å­˜: 100MB
  - Redis TTL: 1å°æ—¶
  - é¢„åŠ è½½é¡¹: 10ä¸ª

åå°ä»»åŠ¡:
  - ç»´æŠ¤é—´éš”: 5åˆ†é’Ÿ
  - æœ€å¤§å¹¶å‘: 2ä¸ª
  - æ™ºèƒ½è°ƒåº¦: å¯ç”¨

æ€§èƒ½ç›‘æ§:
  - ç›‘æ§é¢‘ç‡: 30ç§’
  - è‡ªåŠ¨ä¼˜åŒ–: å¯ç”¨
  - è¯¦ç»†æ—¥å¿—: ç¦ç”¨
```

### ğŸ”´ æ¿€è¿›ä¼˜åŒ– (Aggressive)
**é€‚ç”¨åœºæ™¯**: ä½è´Ÿè½½ã€è¿½æ±‚æœ€ä½³æ€§èƒ½
```
ç¼“å­˜é…ç½®:
  - å†…å­˜ç¼“å­˜: 200MB
  - Redis TTL: 2å°æ—¶
  - é¢„åŠ è½½é¡¹: 20ä¸ª

åå°ä»»åŠ¡:
  - ç»´æŠ¤é—´éš”: 3åˆ†é’Ÿ
  - æœ€å¤§å¹¶å‘: 3ä¸ª
  - æ™ºèƒ½è°ƒåº¦: å¯ç”¨

æ€§èƒ½ç›‘æ§:
  - ç›‘æ§é¢‘ç‡: 15ç§’
  - è‡ªåŠ¨ä¼˜åŒ–: å¯ç”¨
  - è¯¦ç»†æ—¥å¿—: å¯ç”¨
```

### ğŸŸ¢ è‡ªé€‚åº”æ¨¡å¼ (Adaptive)
**é€‚ç”¨åœºæ™¯**: è´Ÿè½½å˜åŒ–é¢‘ç¹ï¼Œéœ€è¦åŠ¨æ€è°ƒæ•´
```
ç¼“å­˜é…ç½®:
  - å†…å­˜ç¼“å­˜: 150MB
  - Redis TTL: 1.5å°æ—¶
  - é¢„åŠ è½½é¡¹: 15ä¸ª

åå°ä»»åŠ¡:
  - ç»´æŠ¤é—´éš”: 4åˆ†é’Ÿ
  - æœ€å¤§å¹¶å‘: 2ä¸ª
  - æ™ºèƒ½è°ƒåº¦: å¯ç”¨

æ€§èƒ½ç›‘æ§:
  - ç›‘æ§é¢‘ç‡: 20ç§’
  - è‡ªåŠ¨ä¼˜åŒ–: å¯ç”¨
  - è¯¦ç»†æ—¥å¿—: ç¦ç”¨

ç‰¹æ®ŠåŠŸèƒ½:
  - æ ¹æ®CPU/å†…å­˜ä½¿ç”¨ç‡è‡ªåŠ¨åˆ‡æ¢çº§åˆ«
  - æ™ºèƒ½é¢„æµ‹è´Ÿè½½è¶‹åŠ¿
  - åŠ¨æ€è°ƒæ•´å„é¡¹å‚æ•°
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. è®¿é—®æ§åˆ¶é¢æ¿
```
URL: http://127.0.0.1:5000/optimization/dashboard
```

### 2. æ‰‹åŠ¨è®¾ç½®ä¼˜åŒ–çº§åˆ«
```python
# é€šè¿‡APIè®¾ç½®
POST /optimization/api/set_level
{
    "level": "balanced"  # minimal, balanced, aggressive, adaptive
}

# é€šè¿‡ä»£ç è®¾ç½®
from app.intelligent_optimization_integrator import get_intelligent_integrator
integrator = get_intelligent_integrator()
integrator.manual_optimize("balanced")
```

### 3. ç›‘æ§ç³»ç»ŸçŠ¶æ€
```python
# è·å–ä¼˜åŒ–çŠ¶æ€
status = integrator.get_optimization_status()

# è·å–æ€§èƒ½æŒ‡æ ‡
metrics = integrator.get_performance_metrics()
```

### 4. é…ç½®è‡ªå®šä¹‰å‚æ•°
```python
from app.optimization_config_manager import get_config_manager
config_manager = get_config_manager()

# æ›´æ–°ç¼“å­˜é…ç½®
config_manager.update_cache_config(
    l1_cache_size_mb=120,
    preload_items_count=12
)

# æ›´æ–°åå°ä»»åŠ¡é…ç½®
config_manager.update_background_task_config(
    maintenance_interval=240,  # 4åˆ†é’Ÿ
    max_concurrent_tasks=2
)
```

## ğŸ“Š ç›‘æ§æŒ‡æ ‡

### ç³»ç»ŸæŒ‡æ ‡
- **CPUä½¿ç”¨ç‡**: å¤„ç†å™¨è´Ÿè½½ç™¾åˆ†æ¯”
- **å†…å­˜ä½¿ç”¨ç‡**: å†…å­˜å ç”¨ç™¾åˆ†æ¯”
- **å“åº”æ—¶é—´**: å¹³å‡è¯·æ±‚å“åº”æ—¶é—´
- **æ´»è·ƒè¿æ¥æ•°**: å½“å‰ç½‘ç»œè¿æ¥æ•°

### ä¼˜åŒ–æŒ‡æ ‡
- **ç¼“å­˜å‘½ä¸­ç‡**: ç¼“å­˜æœ‰æ•ˆæ€§
- **åå°ä»»åŠ¡æ‰§è¡Œæ—¶é—´**: ä»»åŠ¡æ•ˆç‡
- **æ•°æ®åº“æŸ¥è¯¢æ—¶é—´**: æ•°æ®åº“æ€§èƒ½
- **ç³»ç»Ÿå¥åº·è¯„åˆ†**: ç»¼åˆå¥åº·çŠ¶æ€

## ğŸ”„ è‡ªåŠ¨ä¼˜åŒ–é€»è¾‘

### è§¦å‘æ¡ä»¶
```python
# é«˜è´Ÿè½½è§¦å‘æœ€å°ä¼˜åŒ–
if cpu_percent > 80 or memory_percent > 85 or response_time > 2.0:
    switch_to_minimal_optimization()

# ä½è´Ÿè½½è§¦å‘æ¿€è¿›ä¼˜åŒ–  
elif cpu_percent < 30 and memory_percent < 50 and response_time < 0.5:
    switch_to_aggressive_optimization()

# ä¸­ç­‰è´Ÿè½½ä½¿ç”¨å¹³è¡¡æ¨¡å¼
else:
    switch_to_balanced_optimization()
```

### è°ƒæ•´ç­–ç•¥
1. **æ¸è¿›å¼è°ƒæ•´** - é¿å…çªç„¶çš„å¤§å¹…å˜åŒ–
2. **ç¨³å®šæ€§ä¼˜å…ˆ** - ç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œ
3. **ç”¨æˆ·ä½“éªŒ** - ä¼˜å…ˆä¿è¯ç”¨æˆ·ä½“éªŒ
4. **èµ„æºä¿æŠ¤** - é˜²æ­¢èµ„æºè€—å°½

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ä¼˜åŒ–ç³»ç»Ÿæœªå¯åŠ¨
```bash
# æ£€æŸ¥æ—¥å¿—
tail -f logs/system.log | grep "æ™ºèƒ½ä¼˜åŒ–"

# æ‰‹åŠ¨åˆå§‹åŒ–
from app.intelligent_optimization_integrator import init_intelligent_optimization
init_intelligent_optimization(app)
```

#### 2. ç›‘æ§æ•°æ®å¼‚å¸¸
```python
# é‡å¯ç›‘æ§
integrator = get_intelligent_integrator()
integrator.toggle_monitoring(False)
integrator.toggle_monitoring(True)
```

#### 3. é…ç½®ä¸ç”Ÿæ•ˆ
```python
# å¼ºåˆ¶é‡æ–°åŠ è½½é…ç½®
config_manager = get_config_manager()
config_manager._load_config()
```

### æ€§èƒ½è°ƒä¼˜å»ºè®®

1. **å†…å­˜å……è¶³æ—¶** - ä½¿ç”¨æ¿€è¿›ä¼˜åŒ–æ¨¡å¼
2. **CPUç´§å¼ æ—¶** - é™ä½ç›‘æ§é¢‘ç‡å’Œåå°ä»»åŠ¡
3. **ç½‘ç»œå»¶è¿Ÿé«˜** - å¢åŠ ç¼“å­˜TTLæ—¶é—´
4. **å¹¶å‘ç”¨æˆ·å¤š** - å¢åŠ è¿æ¥æ± å¤§å°

## ğŸ“ˆ æ•ˆæœé¢„æœŸ

### æ€§èƒ½æå‡
- **å“åº”æ—¶é—´**: å¹³å‡æå‡30-50%
- **å¹¶å‘å¤„ç†**: æå‡20-40%
- **èµ„æºåˆ©ç”¨**: ä¼˜åŒ–15-25%
- **ç³»ç»Ÿç¨³å®šæ€§**: æ˜¾è‘—æå‡

### æ™ºèƒ½ç‰¹æ€§
- **è‡ªåŠ¨é€‚åº”**: æ— éœ€æ‰‹åŠ¨å¹²é¢„
- **é¢„æµ‹æ€§ä¼˜åŒ–**: æå‰è°ƒæ•´ç­–ç•¥
- **æ•…éšœè‡ªæ„ˆ**: è‡ªåŠ¨æ¢å¤æœ€ä½³çŠ¶æ€
- **å­¦ä¹ èƒ½åŠ›**: æ ¹æ®å†å²æ•°æ®ä¼˜åŒ–

---

**ğŸ¯ æ€»ç»“**: æ™ºèƒ½ä¼˜åŒ–ç³»ç»Ÿé€šè¿‡åŠ¨æ€è°ƒæ•´è€Œéç¦ç”¨åŠŸèƒ½çš„æ–¹å¼ï¼Œå®ç°äº†æ€§èƒ½ä¸åŠŸèƒ½çš„æœ€ä½³å¹³è¡¡ï¼Œä¸ºæ‚¨çš„ä»“å‚¨ç®¡ç†ç³»ç»Ÿæä¾›äº†ä¼ä¸šçº§çš„æ€§èƒ½ä¿éšœã€‚
